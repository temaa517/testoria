<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∞ - Testoria</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- –®–∞–ø–∫–∞ —Å–∞–π—Ç–∞ -->
    <header class="header">
        <div class="container">
            <div class="header-inner">
                <div class="logo">
                    <h3>
                        <i class="fas fa-brain"></i>
                        Testoria
                    </h3>
                </div>
                <nav class="nav">
                    <a href="index.html" class="nav-link">
                        <i class="fas fa-home"></i>
                        –ì–ª–∞–≤–Ω–∞—è
                    </a>
                    <a href="catalog.html" class="nav-link">
                        <i class="fas fa-list"></i>
                        –ö–∞—Ç–∞–ª–æ–≥ —Ç–µ—Å—Ç–æ–≤
                    </a>
                    <a href="about.html" class="nav-link">
                        <i class="fas fa-info-circle"></i>
                        –û –Ω–∞—Å
                    </a>
                    <a href="contact.html" class="nav-link">
                        <i class="fas fa-phone"></i>
                        –ö–æ–Ω—Ç–∞–∫—Ç—ã
                    </a>
                </nav>
                <div class="header-controls">
                    <button class="theme-toggle" id="themeToggle" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ —Ç–µ–º–Ω—É—é —Ç–µ–º—É">
                        <i class="fas fa-moon"></i>
                        <i class="fas fa-sun"></i>
                        <span class="theme-thumb"></span>
                    </button>
                    <!-- –ö–Ω–æ–ø–∫–∏ –≤—Ö–æ–¥–∞ (–ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω) -->
                    <div id="auth-buttons" class="auth-buttons">
                        <a href="login.html" class="btn btn-outline">–í–æ–π—Ç–∏</a>
                        <a href="register.html" class="btn btn-primary">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                    </div>

                    <!-- –ö–Ω–æ–ø–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω) -->
                    <div id="profile-section" class="profile-dropdown" style="display: none;">
                        <button class="profile-btn" onclick="toggleProfileMenu()">
                            üë§ –ü—Ä–æ—Ñ–∏–ª—å
                        </button>
                        <div class="dropdown-content">
                            <a href="profile.html">–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</a>
                            <a href="my-tests.html">–ú–æ–∏ —Ç–µ—Å—Ç—ã</a>
                            <a href="results.html">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã</a>
                            <a href="#" onclick="logout()">–í—ã–π—Ç–∏</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="page-content">
        <!-- –•–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏ -->
        <section class="breadcrumbs">
            <div class="container">
                <nav class="breadcrumbs-nav">
                    <a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
                    <i class="fas fa-chevron-right"></i>
                    <a href="catalog.html">–ö–∞—Ç–∞–ª–æ–≥ —Ç–µ—Å—Ç–æ–≤</a>
                    <i class="fas fa-chevron-right"></i>
                    <span>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã</span>
                </nav>
            </div>
        </section>

        <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∞ -->
        <section class="results-section">
            <div class="container">
                <div class="results-container" id="resultsContainer">
                    <div class="results-loading">
                        <div class="loader-spinner"></div>
                        <p>–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –≤–∞—à–∏ –æ—Ç–≤–µ—Ç—ã...</p>
                    </div>
                </div>

               <!-- –î–µ–π—Å—Ç–≤–∏—è —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º -->
<div class="results-actions" id="resultsActions" style="display: none;">
    <div class="actions-grid">
        <button class="action-btn share-btn" id="shareBtn">
            <i class="fas fa-share-alt"></i>
            –ü–æ–¥–µ–ª–∏—Ç—å—Å—è
        </button>
        <a href="catalog.html" class="action-btn catalog-btn">
            <i class="fas fa-list"></i>
            –ï—â–µ —Ç–µ—Å—Ç—ã
        </a>
        <button class="action-btn retry-btn" id="retryBtn">
            <i class="fas fa-redo"></i>
            –ü—Ä–æ–π—Ç–∏ –∑–∞–Ω–æ–≤–æ
        </button>
    </div>
</div>

<!-- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ -->
<div class="recommendations" id="recommendations" style="display: none;">
    <h3>–í–∞–º –º–æ–∂–µ—Ç –ø–æ–Ω—Ä–∞–≤–∏—Ç—å—Å—è</h3>
    <div class="recommendations-grid" id="recommendationsGrid">
        <!-- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
    </div>
</div>
            </div>
        </section>
    </main>

    <!-- –§—É—Ç–µ—Ä -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>
                        <i class="fas fa-brain"></i>
                        Testoria
                    </h3>
                    <p>–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ</p>
                    <div class="social-icons">
                        <a href="https://t.me/ttemkatut" class="social-link">
                            <i class="fab fa-telegram"></i>
                        </a>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>
                        <i class="fas fa-compass"></i>
                        –ù–∞–≤–∏–≥–∞—Ü–∏—è
                    </h4>
                    <a href="index.html">
                        <i class="fas fa-arrow-right"></i>
                        –ì–ª–∞–≤–Ω–∞—è
                    </a>
                    <a href="catalog.html">
                        <i class="fas fa-arrow-right"></i>
                        –ö–∞—Ç–∞–ª–æ–≥ —Ç–µ—Å—Ç–æ–≤
                    </a>
                    <a href="about.html">
                        <i class="fas fa-arrow-right"></i>
                        –û –Ω–∞—Å
                    </a>
                    <a href="contact.html">
                        <i class="fas fa-arrow-right"></i>
                        –ö–æ–Ω—Ç–∞–∫—Ç—ã
                    </a>
                </div>
                <div class="footer-section">
                    <h4>
                        <i class="fas fa-envelope"></i>
                        –ö–æ–Ω—Ç–∞–∫—Ç—ã
                    </h4>
                    <p>
                        <i class="fas fa-envelope"></i>
                        Email: hello@testoria.cloud
                    </p>
                    <p>
                        <i class="fas fa-phone"></i>
                        –¢–µ–ª–µ—Ñ–æ–Ω: +375 (01) 234-56-78
                    </p>
                    <p>
                        <i class="fas fa-map-marker-alt"></i>
                        –ê–¥—Ä–µ—Å: –≥. –ú–∏–Ω—Å–∫, —É–ª. –£—Ä—É—á—Å–∫–∞—è, 81–ë
                    </p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>
                    <i class="far fa-copyright"></i>
                    2025 Testoria. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.
                </p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        class ResultsManager {
    constructor() {
        this.testResult = null;
        
        this.elements = {
            resultsContainer: document.getElementById('resultsContainer'),
            resultsActions: document.getElementById('resultsActions'),
            recommendations: document.getElementById('recommendations'),
            recommendationsGrid: document.getElementById('recommendationsGrid'),
            shareBtn: document.getElementById('shareBtn'),
            retryBtn: document.getElementById('retryBtn')
        };
        
        this.init();
    }

    init() {
        this.loadResults();
        this.setupEventListeners();
    }

    loadResults() {
        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–∑ localStorage
        const savedResult = localStorage.getItem('lastTestResult');
        
        if (!savedResult) {
            this.showError('–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã. –ü—Ä–æ–π–¥–∏—Ç–µ —Ç–µ—Å—Ç —Å–Ω–∞—á–∞–ª–∞.');
            return;
        }

        this.testResult = JSON.parse(savedResult);
        this.displayResults();
    }

    displayResults() {
        if (!this.testResult) return;

        const result = this.testResult.result;
        
        this.elements.resultsContainer.innerHTML = this.createResultsHTML(result);
        this.elements.resultsActions.style.display = 'block';
        this.elements.recommendations.style.display = 'block';
        
        this.loadRecommendations();
    }

    createResultsHTML(result) {
        const test = this.testResult;
        const completionDate = new Date(test.completedAt).toLocaleDateString('ru-RU');
        
        return `
            <div class="results-success">
                <div class="success-icon">
                    <i class="fas fa-trophy"></i>
                </div>
                <h1 class="results-title">–¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω!</h1>
                <p class="results-subtitle">–í—ã –ø—Ä–æ—à–ª–∏ —Ç–µ—Å—Ç "${test.testTitle}"</p>
                
                <div class="result-card">
                    <div class="result-image">
                        <img src="${result.image}" alt="${result.title}" onerror="this.src='https://images.unsplash.com/photo-1485451456034-3f9391c6f769?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80'">
                    </div>
                    <div class="result-content">
                        <div class="result-badge">
                            <i class="fas fa-award"></i>
                            –í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                        </div>
                        <h2 class="result-type">${result.title}</h2>
                        <p class="result-description">${result.description}</p>
                        <div class="result-meta">
                            <span class="result-date">
                                <i class="far fa-calendar"></i>
                                ${completionDate}
                            </span>
                            <span class="result-questions">
                                <i class="far fa-question-circle"></i>
                                ${test.userAnswers.length} –≤–æ–ø—Ä–æ—Å–æ–≤
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        `;
    }

    loadRecommendations() {
        // –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
        const recommendations = [
            {
                id: 2,
                title: "–ö—Ç–æ —Ç—ã –∏–∑ –∫–æ—à–∞—á—å–∏—Ö?",
                category: "animals",
                description: "–û–ø—Ä–µ–¥–µ–ª–∏, –∫–∞–∫–æ–µ –∂–∏–≤–æ—Ç–Ω–æ–µ –∏–∑ —Å–µ–º–µ–π—Å—Ç–≤–∞ –∫–æ—à–∞—á—å–∏—Ö —Ç–µ–±–µ –ø–æ–¥—Ö–æ–¥–∏—Ç!",
                image: "https://images.unsplash.com/photo-1514888286974-6c03e2ca1dba?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                rating: 4.9
            },
            {
                id: 3,
                title: "–¢–≤–æ–π —Å—Ç–∏–ª—å –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è",
                category: "tech",
                description: "–£–∑–Ω–∞–π, –∫–∞–∫–æ–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç–≤–æ–µ–º—É —Ö–∞—Ä–∞–∫—Ç–µ—Ä—É!",
                image: "https://images.unsplash.com/photo-1555066931-4365d14bab8c?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                rating: 4.7
            },
            {
                id: 5,
                title: "–ö–∞–∫–æ–π —Ç—ã —Å—É–ø–µ—Ä–≥–µ—Ä–æ–π?",
                category: "entertainment",
                description: "–£–∑–Ω–∞–π, –∫–∞–∫–∏–µ —Å—É–ø–µ—Ä—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–∫—Ä—ã—Ç—ã –≤–Ω—É—Ç—Ä–∏ —Ç–µ–±—è!",
                image: "https://images.unsplash.com/photo-1626814026160-2237a95fc5a0?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80",
                rating: 4.9
            }
        ];

        this.elements.recommendationsGrid.innerHTML = recommendations.map(test => `
            <div class="recommendation-card">
                <div class="recommendation-image">
                    <img src="${test.image}" alt="${test.title}">
                    <div class="recommendation-category">
                        ${this.getCategoryName(test.category)}
                    </div>
                </div>
                <div class="recommendation-content">
                    <h4>${test.title}</h4>
                    <p>${test.description}</p>
                    <div class="recommendation-meta">
                        <span class="recommendation-rating">
                            <i class="fas fa-star"></i>
                            ${test.rating}
                        </span>
                    </div>
                    <a href="test.html?id=${test.id}" class="btn btn-sm btn-primary">
                        <i class="fas fa-play-circle"></i>
                        –ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç
                    </a>
                </div>
            </div>
        `).join('');
    }

    getCategoryName(category) {
        const names = {
            'food': 'üçï –ï–¥–∞',
            'animals': 'üêæ –ñ–∏–≤–æ—Ç–Ω—ã–µ',
            'tech': 'üíª –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏',
            'memes': 'üòÇ –ú–µ–º—ã',
            'entertainment': 'üé¨ –†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è',
            'psychology': 'üß† –ü—Å–∏—Ö–æ–ª–æ–≥–∏—è',
            'games': 'üéÆ –ò–≥—Ä—ã'
        };
        return names[category] || 'üìù –î—Ä—É–≥–æ–µ';
    }

    setupEventListeners() {
        this.elements.shareBtn.addEventListener('click', () => this.shareResults());
        this.elements.retryBtn.addEventListener('click', () => this.retryTest());
    }

    shareResults() {
        const result = this.testResult.result;
        const shareText = `–Ø –ø—Ä–æ—à–µ–ª —Ç–µ—Å—Ç "${this.testResult.testTitle}" –Ω–∞ Testoria –∏ –º–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${result.title}! ${result.description}\n\n–ü—Ä–æ–π–¥–∏ –∏ —Ç—ã: ${window.location.origin}`;
        
        if (navigator.share) {
            navigator.share({
                title: `–ú–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∞: ${result.title}`,
                text: shareText,
                url: window.location.href
            });
        } else if (navigator.clipboard) {
            navigator.clipboard.writeText(shareText).then(() => {
                this.showNotification('–†–µ–∑—É–ª—å—Ç–∞—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!', 'success');
            });
        } else {
            this.showNotification(shareText, 'info');
        }
    }

    retryTest() {
        // –ü—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ç–µ—Å—Ç–∞ –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
        window.location.href = `test.html?id=${this.testResult.testId}`;
    }

    showError(message) {
        this.elements.resultsContainer.innerHTML = `
            <div class="results-error">
                <div class="error-icon">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <h2>–û—à–∏–±–∫–∞</h2>
                <p>${message}</p>
                <a href="catalog.html" class="btn btn-primary">
                    <i class="fas fa-arrow-left"></i>
                    –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –∫–∞—Ç–∞–ª–æ–≥
                </a>
            </div>
        `;
    }

    showNotification(message, type = 'info') {
        // –í—Ä–µ–º–µ–Ω–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        alert(message);
    }
}

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', () => {
            new ThemeManager();
            new ResultsManager();
            
            // –ü–ª–∞–≤–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            document.body.style.opacity = '0';
            document.body.style.transition = 'opacity 0.3s ease-in-out';
            
            setTimeout(() => {
                document.body.style.opacity = '1';
            }, 100);
        });
    </script>
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã -->
<script src="auth-core.js"></script>

</body>
</html>